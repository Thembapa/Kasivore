<!DOCTYPE html>
<html lang="en">
<head>

     <title>Kasivore</title>

     <meta charset="UTF-8">
     <meta http-equiv="X-UA-Compatible" content="IE=Edge">
     <meta name="description" content="">
     <meta name="keywords" content="">
     <meta name="author" content="">
     <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
     <meta name="google-signin-client_id" content="{{GID}}">

     <link rel="icon" type="image/png" href="{{url_for('static',filename='images/icons/favicon.ico')}}"/>
     <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='/css/bootstrap.min.css')}}">
     <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='/css/font-awesome.min.css')}}">
     <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='/css/aos.css')}}">
     <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='/css/Login.css')}}">
     <link rel="stylesheet" type="text/css"  href="{{url_for('static',filename='/css/stylefilter.css')}}"> <!-- Resource style -->
     <link rel="stylesheet" type="text/css"  href="{{url_for('static',filename='/css/search-filter.css')}}"> <!-- Resource style -->
     <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/util.css')}}">
     <link rel="stylesheet" type="text/css" href="{{url_for('static',filename='css/ProgressRing.css')}}">
     <link type="text/css" rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
     <!-- MAIN CSS -->
     <link rel="stylesheet" href="/css/KasivoreTheme.css">

<!--
Tooplate 2119 Gymso Fitness
https://www.tooplate.com/view/2119-gymso-fitness

-->
<style>
    /* Always set the map height explicitly to define the size of the div
       * element that contains the map. */
       #map {
        height: 100%;
      }
</style>
</head>
<body onload="PageLoad()" data-spy="scroll" data-target="#navbarNav" data-offset="50">
    
    <!-- MENU BAR -->
    <div class="g-signin2"  data-onsuccess="onSignIn" style="display: none"></div>
    <nav class="navbar navbar-expand-lg fixed-top">
        <div class="container">

            <a href="/"><img src="../images/icons/Logo_White.png" class="KasivoreLogo" ></a>

            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false"
                aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ml-lg-auto" >
                     {%for menu in menubuttons%}
                          <li class="nav-item" ><a class="nav-link smoothScroll customNav"  href="{{menubuttons[menu]}}">{{menu}}</a></li>
                     {%endfor%}
                  
                </ul>

                
                <ul class="navbar-nav ml-lg-auto" >
                    <li>

                            <div class="dropdown">

                              <button class="dropbtn bt_Profile" ><a  href="{{loginUrl}}">
                                  <div class="c100 {{session['ProfileProgress']}} small dark">
                                        <span><img id="Accountpp" src="{{session['profilepicture']}}" alt="Avatar" class="ProfilePicture"></span>
                                        <div class="slice">
                                            <div class="bar"></div>
                                            <div class="fill"></div>

                                        </div>
                                    </div>
                              </a></button>
                              <div class="dropdown-content">
                                
                                {% for usermenu in userMenuList%}
                                    <a href="{{userMenuList[usermenu]}}">{{usermenu}}</a>
                                {%endfor%}
                              
                              </div>
                            </div>
                            
                    </li>
                </ul>
            </div>

        </div>
        
    </nav>


    {% block content%}
    {%endblock%}
   
     <section class="feature" id="feature">
        <div class="container">
            <div class="row">

                <div class="d-flex flex-column justify-content-center ml-lg-auto mr-lg-5 col-lg-5 col-md-6 col-12">
                    <h2 class="mb-3 text-white" data-aos="fade-up">New to Kasivore?</h2>

                    <h6 class="mb-4 text-white" data-aos="fade-up">Your membership is FREE for life</h6>

                    <a href="/login" class="btn custom-btn bg-color mt-3" data-aos="fade-up" data-aos-delay="300" data-toggle="modal" >Become a member today</a>
                </div>

                <div class="mr-lg-auto mt-3 col-lg-4 col-md-6 col-12">
                     <div class="about-working-hours">
                          <div>

                                <h2 class="mb-4 text-white" data-aos="fade-up" data-aos-delay="500">Kasivore, Strengthening local economies </h2>
                               
                                <p>
                                  Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved
                                 </p>
                               </div>
                          </div>
                     </div>
                </div>

            </div>
        </div>
    </section>
     <!-- SCRIPTS -->
    <script type="text/javascript" src="{{url_for('static',filename='/js/jquery.min.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static',filename='/js/bootstrap.min.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static',filename='/js/aos.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static',filename='/js/smoothscroll.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static',filename='/js/custom.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static',filename='/js/kasivore.js')}}"></script>
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <!-- filter js-->
    <script type="text/javascript" src="{{url_for('static',filename='/js/jquery-2.1.1.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static',filename='/js/jquery.mixitup.min.js')}}"></script>
    <script type="text/javascript" src="{{url_for('static',filename='/js/mainfilter.js')}}"></script>
    <!-- Google maps API-->
    
    <script src="{{MAPS}}" async defer></script>
    
  


    <!--Custom java scripty with Jinja -->
    <script type="text/JavaScript">
    var x = document.getElementById("demo");
    var coll = document.getElementsByClassName("collapsible");
    var i;

    for (i = 0; i < coll.length; i++) {
    coll[i].addEventListener("click", function() {
        this.classList.toggle("active");
        var content = this.nextElementSibling;
        if (content.style.display === "block") {
        content.style.display = "none";
        } else {
        content.style.display = "block";
        }
    });
    }
    function PageLoad() {
	  //document.getElementById("txtUsername").style.backgroundColor = "yellow";
       //alert(document.getElementById('hf_IsSignup' ).value);
       if(document.getElementById('hf_long') != null)
       {
            getLocation();
       }
        
        if( document.getElementById('User_country') != null) // contry options
        {
                var natinality = '' ;
                {%for userDetails in session['CurrentUser']%}
                    natinality ='{{userDetails[13]}}';
                {%endfor%}
                selectElement('User_country',natinality);
                if(natinality !='South Africa')
                {
                    document.getElementById('passportdiv' ).style.display = 'Block';
                    document.getElementById('SAiddiv' ).style.display = 'none';			
                    document.getElementById('txtIDNO' ).required;
                }
                else
                {
                    document.getElementById('passportdiv' ).style.display = 'none';
                    document.getElementById('SAiddiv' ).style.display = 'Block';
                    document.getElementById('txtPassport' ).required;
                }

                {%for Provider in serviceprovider%}
                    CategorySelect({{Provider[5]}},"{{Provider[4]}}",0) 
                {%endfor%}
            
        }
        
        
        
        if( document.getElementById('hfCurrentForm') != null) // Profile Control
        {
            ProfileSlides(document.getElementById('hfCurrentForm').value);
        }
        

        if(document.getElementById('hf_IsSignup' ) != null)
        {
            
            if(document.getElementById('hf_IsSignup' ).value==="")	  
            {
                document.getElementById('SiginForm' ).style.display = "block";
                document.getElementById('footer').style.display = "block"; 
                document.getElementById('SigupForm' ).style.display = "none";
                document.getElementById( 'lbSignin' ).innerHTML = "Sign in";
                //document.getElementById('LoginDiv').style.display = "block"; 
                //document.getElementById('div_HomePage').style.display = "none"; 
                
            }
            else
            {
                document.getElementById( 'lbSignin' ).innerHTML = "Sign up";
                document.getElementById('SiginForm' ).style.display = "none"; 
                document.getElementById('SigupForm' ).style.display = "block";
                document.getElementById('footer').style.display = "none";
                document.getElementById( 'lbSignin' ).innerHTML = "Sign out";
            }
        }
        
        }
        // This sample uses the Autocomplete widget to help the user select a
        // place, then it retrieves the address components associated with that
        // place, and then it populates the form fields with those details.
        // This sample requires the Places library. Include the libraries=places
        // parameter when you first load the API. For example:

        var placeSearch, autocomplete, autocomplete2;

        var componentForm = {
            street_number: 'short_name',
            route: 'long_name',
            locality: 'long_name',
            administrative_area_level_1: 'long_name',
            country: 'long_name',
            postal_code: 'short_name'
        };
        var componentForm2 = {
            street_number2: 'short_name',
            route2: 'long_name',
            locality2: 'long_name',
            administrative_area_level_12: 'long_name',
            country2: 'long_name',
            postal_code2: 'short_name'
        };
        

        function initAutocomplete() {
        // Create the autocomplete object, restricting the search predictions to
        // geographical location types.
        autocomplete = new google.maps.places.Autocomplete(
        document.getElementById('txt_addressSearch'), {types: ['geocode']});

        autocomplete2 = new google.maps.places.Autocomplete(
        document.getElementById('txtbusAddress'), {types: ['geocode']});

        // Avoid paying for data that you don't need by restricting the set of
        // place fields that are returned to just the address components.
        //autocomplete.setFields(['address_component']);

        // When the user selects an address from the drop-down, populate the
        // address fields in the form.
        autocomplete.addListener('place_changed', fillInAddress);
        autocomplete2.addListener('place_changed', fillInAddress2);
        }

        function fillInAddress() {
        // Get the place details from the autocomplete object.
        var place = autocomplete.getPlace();
        document.getElementById('hf_longitude').value = place.geometry.location.lng();
        document.getElementById('hf_latitude').value = place.geometry.location.lat();
        for (var component in componentForm) {
            document.getElementById(component).value = '';
            document.getElementById(component).disabled = false;
        }

        // Get each component of the address from the place details,
        // and then fill-in the corresponding field on the form.
        for (var i = 0; i < place.address_components.length; i++) {
            var addressType = place.address_components[i].types[0];
            if (componentForm[addressType]) {
            var val = place.address_components[i][componentForm[addressType]];
            document.getElementById(addressType).value = val;
            }
        }
        }
        function fillInAddress2() {
        // Get the place details from the autocomplete object.
        var place = autocomplete2.getPlace();
        document.getElementById('hf_longitude2').value = place.geometry.location.lng();
        document.getElementById('hf_latitude2').value = place.geometry.location.lat();
        for (var component in componentForm2) {
            document.getElementById(component).value = '';
            document.getElementById(component).disabled = false;
        }

        // Get each component of the address from the place details,
        // and then fill-in the corresponding field on the form.
        for (var i = 0; i < place.address_components.length; i++) {
            var addressType = place.address_components[i].types[0];
            var textfied  = addressType + "2";
            if (componentForm2[textfied]) {
            var val = place.address_components[i][componentForm2[textfied]];
            document.getElementById(textfied).value = val;
            }
        }
        }


        // Bias the autocomplete object to the user's geographical location,
        // as supplied by the browser's 'navigator.geolocation' object.
        function geolocate() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function(position) {
            var geolocation = {
                lat: position.coords.latitude,
                lng: position.coords.longitude
            };
            var circle = new google.maps.Circle(
                {center: geolocation, radius: position.coords.accuracy});
            autocomplete.setBounds(circle.getBounds());
            autocomplete2.setBounds(circle.getBounds());
            });
        }
        }

      /*===================== Get cuurent Location============================*/
        

        function getLocation() {
        if (navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(showPosition);
        } else { 
           alert("Geolocation is not supported by this browser.");
        }
        }

        function showPosition(position) {
        alert(long)
            if( long =='' || long =='None')
            {
                window.location.replace("/index/" + position.coords.longitude+ "/"  + position.coords.latitude );
            }
        
        }

  
    </script>

</body>
</html>